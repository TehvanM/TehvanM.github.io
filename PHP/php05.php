<?php
// Data Arrays
$girlNames = ["Anna", "Maria", "Liisa", "Katrin", "Sandra", "Helena", "Eva", "Laura"];
sort($girlNames);

$carBrands = ["Subaru","BMW","Acura","Mercedes-Benz","Lexus","GMC","Volvo","Toyota","Volkswagen","Volkswagen","GMC","Jeep","Saab","Hyundai","Subaru","Mercedes-Benz",
"Honda","Kia","Mercedes-Benz","Chevrolet","Chevrolet","Porsche","Buick","Dodge","GMC","Dodge","Nissan","Dodge","Jaguar","Ford","Honda","Toyota","Jeep",
"Kia","Buick","Chevrolet","Subaru","Chevrolet","Chevrolet","Pontiac","Maybach","Chevrolet","Plymouth","Dodge","Nissan","Porsche","Nissan","Mercedes-Benz",
"Suzuki","Nissan","Ford","Acura","Volkswagen","Lincoln","Mazda","BMW","Mercury","Mitsubishi","Ram","Audi","Kia","Pontiac","Toyota","Acura","Toyota","Toyota",
"Chevrolet","Oldsmobile","Acura","Pontiac","Lexus","Chevrolet","Cadillac","GMC","Jeep","Audi","Acura","Acura","Honda","Dodge","Hummer","Chevrolet","BMW",
"Honda","Lincoln","Hummer","Acura","Buick","BMW","Chevrolet","Cadillac","BMW","Pontiac","Audi","Hummer","Suzuki","Mitsubishi","Jeep","Buick","Ford"];

$vinCodes = ["1GKS1GKC8FR966658", "1FTEW1C87AK375821", "1G4GF5E30DF760067", "1FTEW1CW9AF114701", "WAUGGAFC8CN433989", "3G5DA03E83S704506", "4JGDA2EB0DA207570", 
"1FTEW1E88AK070552", "SAJWA0F77F8732763", "JHMFA3F21BS660717", "JTHBP5C29C5750730", "WA1LFAFP9DA963060", "3D7TT2CT6BG521976", "WVWN7EE961049", 
"2C3CA5CG3BH341234", "YV4952CFXC162587", "KNALN4D71F5805172", "JN1CV6EK7BM903692", "5FRYD3H84EB186765", "WAUL64B83N441878", "WDDGF4HBXCF845665", 
"WAUKF78E45A133973", "JN1BY0AR2AM022612", "WA1EY74L69D931520", "3GYFNGEYXBS290465", "1D7CW2GK4AS059336", "JN8AZ1FY5EW087447", "WAUBF78E57A343355", 
"SCFFBCCD8AG695133", "WBAWC73548E143482", "3GYFNGE38DS093883", "SCBCP73WC348460", "JN8AE2KPXE9353316", "2C3CDXDT2EH018229", "1G6AH5SX7D0325662", 
"WVWED7AJ7DW431402", "1FTKR1AD3AP316066", "WBAKF5C52CE612586", "1FTNX2A57AE16083", "WAUCFAFR1AA166821", "SCFFDAAM3EG486065", "1G4PR5SK5F4821043", 
"1C3CDFCB4ED858321", "1N6AD0CW8EN722090", "1NXBU4EE0AZ438077", "2T1BPRHE7FC131594", "JH4KB1637C451183", "1C4NJCBA7ED747024", "WAUHF68P86A736691", 
"3D7TT2HT1AG96429", "5GADX23L96D250838", "5FRYD3H25FB985936", "1G4GG5E30DF126304", "KNADH5A38B6072755", "WAUBFAFL1BA477979", "3C63DRL4CG674293", 
"1G6AR5SX0E0834815", "1NXBU4EE2AZ309838", "WAUKGBFB4AN797783", "JN1AJ0HP8AM801887", "WAUPL68E25A448831", "WA1C8BFP3FA535374", "WAUHE78P78A019744", 
"TRURD38J081400551", "1G4HP52K95428171", "5N1CR2MN1EC607241", "5UMDU93417L322773", "1G6AJ5S35F09585", "JN1CV6AP3BM234743", "SCBCR63W66C842051", 
"SCFFDCBD2AG509467", "WBA3C1C58CA664091", "1D7RW2BK6BS922303", "WAUDH98E67A546009", "2HNYB1H46CH683844", "3VW467AT4DM257275", "WDDGF4HB7CA515172", 
"2G61W5S88E9666199", "5GADV33W17D256205", "2C3CDXDT9CH683075", "2G4GU5X0E9989574", "WAUJC58E53A641651", "WDDEJ7KB3CA053774", "3D73M3CL6AG890452", 
"5GAER13D19J026924", "1G4HC5EM1BU329204", "3VWML7AJ6CM772736", "3C6TD4HT2CG011211", "JTDZN3EU2FJ023675", "JN8AZ1MU4CW041721", "KNAFX5A82F5991024", 
"1N6AA0CJ1D57470", "WAUEG98E76A780908", "WAUAF78E96A920706", "1GT01XEG8FZ268942", "1FTEW1CW4AF371278", "JN1AZ4EH8DM531691", "WAUEKAFBXAN294295", 
"1N6AA0EDXFN868772", "WBADW3C59DJ422810"];

$companies = ["Kimia", "Mynte", "Voomm", "Twiyo", "Layo", "Talane", "Gigashots",
"Tagchat", "Quaxo", "Voonyx", "Kwilith", "Edgepulse", "Eidel",
"Eadel", "Jaloo", "Oyope", "Jamia"];
sort($companies);

$countries = ["Indonesia", "Canada", "Kyrgyzstan", "Germany", "Philippines",
"Philippines", "Canada", "Philippines", "South Sudan", "Brazil",
"Democratic Republic of the Congo", "Indonesia", "Syria", "Sweden",
"Philippines", "Russia", "China", "Japan", "Brazil", "Sweden", "Mexico", "France",
"Kazakhstan", "Cuba", "Portugal", "Czech Republic"];

$chineseNames = ["瀚聪", "月松", "雨萌", "展博", "雪丽", "哲恒", "慧妍", "博裕", "宸瑜", "奕漳",
"思宏", "伟菘", "彦歆", "睿杰", "尹智", "琪煜", "惠茜", "晓晴", "志宸", "博豪",
"璟雯", "崇杉", "俊誉", "军卿", "辰华", "娅楠", "志宸", "欣妍", "明美"];
sort($chineseNames);

$names = ["Feake", "Bradwell", "Dreger", "Bloggett", "Lambole", "Daish", "Lippiett",
"Blackie", "Stollenbeck", "Houseago", "Dugall", "Sprowson", "Kitley", "Mcenamin",
"Allchin", "Doghartie", "Brierly", "Pirrone", "Fairnie", "Seal", "Scoffins",
"Galer", "Matevosian", "DeBlase", "Cubbin", "Izzett", "Ebi", "Clohisey",
"Prater", "Probart", "Samwaye", "Concannon", "MacLure", "Eliet", "Kundt", "Reyes"];

$images = ["prentice.jpg", "freeland.jpg", "peterus.jpg", "devlin.jpg", "gabriel.jpg", "pete.jpg"];

$salaries2018 = [1220, 1213, 1295, 1312, 1298, 1354, 1296, 1286, 1292, 1327, 1369, 1455];

// Helper Functions
function getRandomName($names) {
    return $names[array_rand($names)];
}

function countBrand($brands, $brand) {
    return count(array_filter($brands, fn($b) => $b === $brand));
}

function getShortVins($vins) {
    return array_filter($vins, fn($vin) => strlen($vin) < 17);
}

function calculateAverage($numbers) {
    return array_sum($numbers) / count($numbers);
}

function getLongestCountries($countries) {
    $maxLength = max(array_map('strlen', $countries));
    return array_filter($countries, fn($country) => strlen($country) === $maxLength);
}

// HTML Output
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estonian Programming Tasks</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gray-100 p-8">
    <div class="max-w-6xl mx-auto space-y-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">Estonian Programming Tasks</h1>

        <!-- Girl Names Section -->
        <section class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">1. Girl Names</h2>
            <div class="space-y-4">
                <div>
                    <h3 class="font-medium mb-2">All Names (Sorted):</h3>
                    <ul class="list-disc pl-5">
                        <?php foreach ($girlNames as $name): ?>
                            <li><?= htmlspecialchars($name) ?></li>
                        <?php endforeach; ?>
                    </ul>
                </div>
                <div>
                    <h3 class="font-medium mb-2">First Three Names:</h3>
                    <ul class="list-disc pl-5">
                        <?php for ($i = 0; $i < 3; $i++): ?>
                            <li><?= htmlspecialchars($girlNames[$i]) ?></li>
                        <?php endfor; ?>
                    </ul>
                </div>
                <div>
                    <h3 class="font-medium mb-2">Last Name:</h3>
                    <p class="pl-5"><?= htmlspecialchars(end($girlNames)) ?></p>
                </div>
                <div>
                    <h3 class="font-medium mb-2">Random Name:</h3>
                    <p class="pl-5"><?= htmlspecialchars(getRandomName($girlNames)) ?></p>
                </div>
            </div>
        </section>

        <!-- Cars Section -->
        <section class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">2. Cars</h2>
            <div class="space-y-4">
                <div>
                    <h3 class="font-medium mb-2">Statistics:</h3>
                    <ul class="list-disc pl-5">
                        <li>Total cars: <?= count($carBrands) ?></li>
                        <li>Arrays have same length: <?= count($carBrands) === count($vinCodes) ? "Yes" : "No" ?></li>
                        <li>Toyota count: <?= countBrand($carBrands, "Toyota") ?></li>
                        <li>Audi count: <?= countBrand($carBrands, "Audi") ?></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-medium mb-2">VIN codes shorter than 17 characters:</h3>
                    <ul class="list-disc pl-5">
                        <?php foreach (getShortVins($vinCodes) as $vin): ?>
                            <li><?= htmlspecialchars($vin) ?> (<?= strlen($vin) ?> characters)</li>
                        <?php endforeach; ?>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Salaries Section -->
        <section class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">3. Average Salaries</h2>
            <div>
                <h3 class="font-medium mb-2">2018 Average Salary:</h3>
                <p class="pl-5"><?= number_format(calculateAverage($salaries2018), 2) ?> €</p>
            </div>
        </section>

        <!-- Companies Section -->
        <section class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">4. Companies</h2>
            <div class="space-y-4">
                <div>
                    <h3 class="font-medium mb-2">Company List:</h3>
                    <ul class="list-disc pl-5">
                        <?php foreach ($companies as $company): ?>
                            <li><?= htmlspecialchars($company) ?></li>
                        <?php endforeach; ?>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Countries Section -->
        <section class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">5. Countries</h2>
            <div>
                <h3 class="font-medium mb-2">Longest Country Names (<?= max(array_map('strlen', $countries)) ?> characters):</h3>
                <ul class="list-disc pl-5">
                    <?php foreach (getLongestCountries($countries) as $country): ?>
                        <li><?= htmlspecialchars($country) ?></li>
                    <?php endforeach; ?>
                </ul>
            </div>
        </section>

        <!-- Chinese Names Section -->
        <section class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">6. Chinese Names</h2>
            <div class="space-y-4">
                <div>
                    <h3 class="font-medium mb-2">First Name:</h3>
                    <p class="pl-5"><?= htmlspecialchars($chineseNames[0]) ?></p>
                </div>
                <div>
                    <h3 class="font-medium mb-2">Last Name:</h3>
                    <p class="pl-5"><?= htmlspecialchars(end($chineseNames)) ?></p>
                </div>
            </div>
        </section>

        <!-- Google Search Section -->
        <section class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">7. Google Search</h2>
            <div class="space-y-4">
                <form method="GET" class="flex gap-2">
                    <input
                        type="text"
                        name="search"
                        placeholder="Enter name to search"
                        class="px-3 py-2 border rounded"
                    >
                    <button
                        type="submit"
                        class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"
                    >
                        Search
                    </button>
                </form>
                <?php if (isset($_GET['search'])): 
                    $searchTerm = $_GET['search'];
                    $found = in_array($searchTerm, $names);
                ?>
                    <div class="p-4 rounded <?= $found ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700' ?>">
                        <?= $found 
                            ? "The name \"" . htmlspecialchars($searchTerm) . "\" was found in the database!"
                            : "The name \"" . htmlspecialchars($searchTerm) . "\" was not found in the database."
                        ?>
                    </div>
                <?php endif; ?>
            </div>
        </section>

        <!-- Images Section -->
        <section class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">8. Images</h2>
            <div class="space-y-4">
                <div>
                    <h3 class="font-medium mb-2">Third Image:</h3>
                    <img 
                        src="https://source.unsplash.com/random/300x300?portrait&sig=<?= urlencode($images[2]) ?>"
                        alt="<?= htmlspecialchars($images[2]) ?>"
                        class="w-48 h-48 object-cover rounded"
                    >
                </div>
                <div>
                    <h3 class="font-medium mb-2">All Images:</h3>
                    <div class="grid grid-cols-6 gap-4">
                        <?php foreach ($images as $image): ?>
                            <div class="aspect-square">
                                <img
                                    src="https://source.unsplash.com/random/300x300?portrait&sig=<?= urlencode($image) ?>"
                                    alt="<?= htmlspecialchars($image) ?>"
                                    class="w-full h-full object-cover rounded"
                                >
                            </div>
                        <?php endforeach; ?>
                    </div>
                </div>
            </div>
        </section>
    </div>
</body>
</html>